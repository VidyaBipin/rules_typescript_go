---
platforms:
  ubuntu1404:
    run_targets:
    - "//:gazelle"
    - "@nodejs//:yarn"
    build_targets:
    - "..."
    test_flags:
    # TODO(gregmagolan): shared libs needed by chrome & firefox not available on ubuntu1404
    - "--test_tag_filters=-browser:chromium-local,-browser:firefox-local"
    test_targets:
    - "..."
  ubuntu1604:
    run_targets:
    - "//:gazelle"
    - "@nodejs//:yarn"
    build_targets:
    - "..."
    test_flags:
    # TODO(gregmagolan): shared libs needed by chrome & firefox not available on ubuntu1604
    - "--test_tag_filters=-browser:chromium-local,-browser:firefox-local"
    test_targets:
    - "..."
  macos:
    run_targets:
    - "//:gazelle"
    - "@nodejs//:yarn"
    build_targets:
    - "..."
    test_flags:
    # TODO(gregmagolan): chrome & firefox unknown breakage on macos target here; does work locally on mac
    - "--test_tag_filters=-browser:chromium-local,-browser:firefox-local"
    test_targets:
    - "..."
  windows:
    run_targets:
    # TODO(alexeagle): add go build generation when rules_go is fixed
    # - "//:gazelle"
    - "@nodejs//:yarn"
    build_targets:
    - "..."
    - "--"
    - "-//docs/..."
    test_targets:
    - "..."
    - "--"
    - "-//docs/..." 
    # TODO(filipesilva): reenable after https://github.com/bazelbuild/rules_typescript/issues/270 is fixed.
    - "-//ts_auto_deps/analyze:go_default_test"    
    - "-//ts_auto_deps/updater:go_default_test"    
    - "-//devserver/..."
    # TODO(filipesilva): fix this test
    - "-//examples/protocol_buffers:test_chromium-local"
